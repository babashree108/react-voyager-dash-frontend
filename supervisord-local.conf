[supervisord]
nodaemon=true
user=root
logfile=/var/log/supervisor/supervisord.log
pidfile=/var/run/supervisord.pid

[program:mysql]
command=/usr/bin/mysqld_safe
autostart=true
autorestart=true
stdout_logfile=/var/log/mysql-stdout.log
stderr_logfile=/var/log/mysql-stderr.log
priority=1

[program:backend]
# Run via a shell so globbing (target/*.jar) is expanded to the actual jar filename.
# supervisord does not perform shell expansions when given the command directly.
command=/bin/bash -lc 'exec java -jar /app/backend/target/*.jar'
directory=/app/backend
autostart=true
autorestart=true
stdout_logfile=/var/log/backend-stdout.log
stderr_logfile=/var/log/backend-stderr.log
priority=2
startsecs=10

[program:nginx]
command=/usr/sbin/nginx -g 'daemon off;'
autostart=true
autorestart=true
stdout_logfile=/var/log/nginx-stdout.log
stderr_logfile=/var/log/nginx-stderr.log
priority=3
